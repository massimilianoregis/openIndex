<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Community</title>

    <!-- Core CSS - Include with every page -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="font-awesome/css/font-awesome.css" rel="stylesheet">

    <!-- SB Admin CSS - Include with every page -->
    <link href="css/sb-admin.css" rel="stylesheet">
	<link rel="stylesheet" href="http://daneden.github.io/animate.css/animate.min.css" />	
</head>

<body ng-app="ngAnimate" class="">

<script>
function loginCtrl($scope)
	{	
	$scope.view=
		{
		show:function()
			{
			if($community.user.logged) return "logged";
			if(this.page!=null) return this.page;
			return "login";
			},			
		};
	$scope.login=$community.login.basic;
	$scope.register=$community.register;
	$scope.user = $community.user;
	$(document).on("community.register.waiting",function()
		{
		$scope.register.waiting=true;
		})
	$(document).on("community.register.done",function()
		{		
		$scope.register.waiting=false;
		$scope.$apply();
		})
	$(document).on("community.logerror",function()
		{
		var anim="wobble";
		$(".login-panel").parent().addClass(anim).one('webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend', function()
			{
      		$(this).removeClass(anim);
      		});
		});
	$(document).on("community.logged community.logout",function()
		{				
		$scope.$apply();
		})
	$(document).on("community.register",function()
		{						
		$scope.view.page="registered";
		$scope.$apply();
		})
	}
	
</script>
<style>
.animated
	{
	position:absolute;
	width:94%;
	}
.ng-hide {
  /* this is just another form of hiding an element */
  display:block!important;
  position:absolute;  
  top:-9999px;
  left:-9999px;
}
.animated.fading.ng-leave 
	{
    -webkit-animation-name: fadeOut;
  	animation-name: fadeOut;
	}
.animated.fading.ng-enter 
	{
  	-webkit-animation-name: fadeIn;
  	animation-name: fadeIn;
	}
.animated.bouncing.ng-leave 
	{
    -webkit-animation-name: bounceOut;
  	animation-name: bounceOut;
	}
.animated.bouncing.ng-enter 
	{
  	-webkit-animation-name: bounceIn;
  	animation-name: bounceIn;
	}
</style>

    <div class="container" ng-controller="loginCtrl">
        <div class="row" ng-switch="view.show()">
        	<div class="col-md-4 col-md-offset-4">
        	           
            
            	<!--WELCOME-->
	        	<div class="animated bouncing" ng-switch-when="logged">
	                <div class="login-panel panel panel-default">
	                    <div class="panel-heading">
	                        <h3 class="panel-title">Hi {{user.firstName}}</h3>
	                    </div>
	                    <div class="panel-body">
	                    	<div class="form-group">
	                        	<input class="form-control" placeholder="E-mail" ng-model="user.mail" type="email" autofocus>
	                        </div>
	                        <div class="form-group">
	                        	<input class="form-control" placeholder="first Name" ng-model="user.firstName" type="name" autofocus>
	                        </div>
	                        <div class="form-group">
	                        	<input class="form-control" placeholder="second Name" ng-model="user.secondName" type="name" autofocus>
	                        </div>
	                   	 <div class="form-group">
	                        	<textarea ng-model="user.jsondata" style="width:100%; height:50px"></textarea>
	                        </div>
	                   		<div class="form-group">
	                        Welcome {{user.firstName}}
	                       	</div>
	                       <a ng-click="user.save()" class="btn btn-lg btn-success btn-block">Save</a>	                       
	                       <a ng-click="user.logout()" class="btn btn-lg btn-success btn-block">Logout</a>
	                    </div>
	                </div>
	            </div>
            	
            	<!--REGISTERED-->
	        	<div class="animated fading" ng-switch-when="registered">
	                <div class="login-panel panel panel-default">
	                    <div class="panel-heading">
	                        <h3 class="panel-title">Send {{user.mail}}</h3>
	                    </div>
	                    <div class="panel-body">
	                    	<div class="form-group">
	                       	We have sent you a mail..
	                       	</div>
	                       <a ng-click="view.page='login'" class="btn btn-lg btn-success btn-block">Login</a>
	                    </div>
	                </div>
	            </div>
            	
	        	<!--REGISTER-->
	        	<div class="animated fading" ng-switch-when="register">
	                <div class="login-panel panel panel-default">
	                    <div class="panel-heading">
	                        <h3 class="panel-title">Register</h3>
	                    </div>
	                    <div class="panel-body">
	                    	<div class="form-group" ng-show="register.waiting">
	                    		Waiting please...
	                    	</div>
	                        <form role="form" action="/community/login" ng-hide="register.waiting">                        
	                            <fieldset>
	                                <div class="form-group">
	                                    <input class="form-control" placeholder="E-mail" ng-model="register.mail" type="email" autofocus>
	                                </div>
	                                <div class="form-group">
	                                    <input class="form-control" placeholder="Password" ng-model="register.psw" type="password">
	                                </div>
	                                <div class="form-group">
	                                    <input class="form-control" placeholder="Password" ng-model="register.psw2" type="password">
	                                </div>
	                                                       
	                                <a ng-click="register.try()" class="btn btn-lg btn-success btn-block">Register</a>
	                                <a ng-click="view.page='login'" class="btn btn-lg btn-success btn-block">Login</a>
	                            </fieldset>
	                        </form>
	                        
	                    </div>
	                </div>
	            </div>
	        	
	        	<!--LOGIN-->
	            <div class="animated fading" ng-switch-when="login">
	            
	                <div class="login-panel panel panel-default">
	                    <div class="panel-heading">
	                        <h3 class="panel-title">Please Sign In</h3>
	                    </div>
	                    <div class="panel-body">
	                    	
	                        <form role="form" action="/community/login">                        
	                            <fieldset>
	                                <div class="form-group">
	                                    <input class="form-control" placeholder="E-mail" ng-model="login.mail" type="email" autofocus>
	                                </div>
	                                <div class="form-group">
	                                    <input class="form-control" placeholder="Password" ng-model="login.psw" type="password">
	                                </div>
	                                <div class="checkbox">
	                                    <label>
	                                        <input name="remember" type="checkbox" value="Remember Me">Remember Me
	                                    </label>
	                                </div>
	                                <div class="form-group">
	                                  <a ng-click="view.page='remember'">remember my mail</a>
	                                </div>      
	                                                          
	                                <a ng-click="login.try()" class="btn btn-lg btn-success btn-block">Login</a>
	                                <a ng-click="view.page='register'" class="btn btn-lg btn-success btn-block">Register</a>
	                            </fieldset>
	                        </form>
	                        
	                    </div>
	                </div>
	            </div>
	            
            	<!--REMEMBER-->
	            <div class="animated" ng-switch-when="remember">
	                <div class="login-panel panel panel-default">
	                    <div class="panel-heading">
	                        <h3 class="panel-title">Remember</h3>
	                    </div>
	                    <div class="panel-body">
	                    	
	                        <form role="form" action="/community/login">                        
	                            <fieldset>
	                                <div class="form-group">
	                                    <input class="form-control" placeholder="E-mail" ng-model="login.mail" type="email" autofocus>
	                                </div>
	                                
	                                                    
	                                <a ng-click="login.remember()" class="btn btn-lg btn-success btn-block">Invia</a>
	                                
	                            </fieldset>
	                        </form>
	                        
	                    </div>
	                </div>
	            </div>
            
            </div>
        </div>
    </div>

    <!-- Core Scripts - Include with every page -->
    <script src="js/jquery-1.10.2.js"></script>
    
     <script src="js/angular.min.js"></script>
     <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.14/angular-animate.js"></script>
  
    <script src="js/community.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/plugins/metisMenu/jquery.metisMenu.js"></script>

    <!-- SB Admin Scripts - Include with every page -->
    <script src="js/sb-admin.js"></script>
<script>
 var myApp = angular.module('MyApp', ['ngAnimate']);
 </script>
</body>

</html>
